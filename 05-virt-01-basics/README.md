
## Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

**Полная (аппарратная) виртуализация** 
- сверху железа слой гипервизора (без необходимости ОС)
- гипервизор является специализированным слоем поверх железа, но котором создаются VM
- гипервизор полностью имитирует оборудование для гостевых ОС
- VM, как правило, не знает о реальном железе, все драйверы в слое гипервизора

**Паравиртуализация**
- сверху железа слой ОС
- гипервизор работает с железом через слой ОС
- гипервизор модифицирует ядро гостевой VM для раздельного доступа к железу, чтобы позволить всем гостевым ОС в системе совместно использовать ресурсы, а не пытаться эмулировать всю аппаратную среду
 
**Виртуализация на основе ОС** 
- изолированные и безопасные VM
- не позволяет запускать ОС с ядрами, отличными от типа ядра хостовой ОС

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.

**Вот тут мне сложно ответить - пусть будет Xen (в редакции - в зависимости от гостевой ОС)** 
   - возможно должно быть несколько VM с высокоскоростным коннектом к БД на hardware СХД на SSD/NVMe
   - и для самой СХД должно быть зеркало
   - для VM похоже важны родные драйверы для HBA
   - и хорошая изоляция от других процессов на хосте



- Различные web-приложения.

**Паравиртуализация - KVM например** 
   - можно выбрать нужную ОС
   - по WEB подобрать необходимое ПО
   - относительно простой инструмент

- Windows системы для использования бухгалтерским отделом.

**Паравиртуализация - Hyper-V (VMWare)**
   - Hyper-V - Native среда для Windows и 1С
   - простота администрирования
   - как правило, данное ПО уже в наличии
   - достаточная надежность и управляемость
   - VMWare - как универсальный вариант, в случае имеющихся лицензий и специалистов

- Системы, выполняющие высокопроизводительные расчеты на GPU.

**физические сервера**
   - исключить сложности с драйверами
   - снизить потерю производительности

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

**Hyper-V или VMWare**
   - зависит от бюджета и имеющихся лицензий
   - а также от подготовки сотрудников

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

**KVM**
   - лучший и наиболее простой вариант open source

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

**Hyper-V - если уже имеются лицензии Windows Server**

**иначе - KVM**

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

**VirtualBOX**
   - для тестирования единичных экземпляров ОС - самый простой вариант
   - возможность запуска разных версий ОС
   - совместно с Vagrant
   - быстрое развертывание

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

**Проблемы и недостатки:**
- больше применяемых инструментов требуют больше ресурсов (ПО, обновления, тесты, баги, квалификация, люди) на разворачивание и поддержку

**Минимизации этих рисков и проблем:**
- тщательный подбор инструментов и технологий
- подготовка сотрудников
- контракты на платную поддержку
- обеспечивать резервирование
- тестирование обновлений и изменений

**Создавали бы вы гетерогенную среду или нет - для Критикал инфраструктуры - ДА:**
- необходимо соблюдать принцип независимости от одного Вендора и иметь хотя бы 2 независимых платформы
- какой-либо непредвиденный сбой/уязвимость на уровне платформы не должен распространиться на другую платформу
- есть вариант тестировать решения на 2х платформах и искючать платформозависимые проблемы при анализе сбоев
- также вариант сравнить различные хар-ки использования нескольких платформ: удобство, скорость, надежность и тп